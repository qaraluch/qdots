# Qdots settings
export QDOTS_USER_PROMPT={{ .qdotsprompt }}

# Qdots vars
export QDOTS_CONF_DIR="$HOME/.config"
export QDOTS_ZSH_CONF_DIR="$QDOTS_CONF_DIR/zsh"
export QDOTS_ZSH_HISTORY_DIR="$HOME/.local/share/zsh"
export QDOTS_ZSH_CACHE_DIR="$HOME/.cache/zsh"
export QDOTS_ZSH_CACHE_PLUGS_DIR="$HOME/.cache/zsh/plugs"
export QDOTS_FUNCTIONS_DIR="$QDOTS_CONF_DIR/functions"

# Source qdots functions
for file ($QDOTS_FUNCTIONS_DIR/*.sh) source $file
  #TODO: change in the future /*.{sh,zsh})

# Prompt
[ -f "$QDOTS_ZSH_CONF_DIR/.zshrc-prompt" ] && source "$QDOTS_ZSH_CONF_DIR/.zshrc-prompt"

# Zshell options
[ -f "$QDOTS_ZSH_CONF_DIR/.zshrc-options" ] && source "$QDOTS_ZSH_CONF_DIR/.zshrc-options"

# Fzf configuration
source /usr/share/fzf/completion.zsh
source /usr/share/fzf/key-bindings.zsh

export FZF_DEFAULT_OPTS='
    --color fg:252,bg:233,hl:67,fg+:252,bg+:235,hl+:81
    --color info:144,prompt:161,spinner:135,pointer:135,marker:118
'

export FZF_DEFAULT_COMMAND='ag --follow --hidden --ignore .git --ignore node_modules --ignore .cache -g ""'
export FZF_CTRL_T_COMMAND='ag --follow --hidden --ignore .git --ignore node_modules --ignore .cache -g "" | sed -e "s:/[^/]*$::" | uniq'
export FZF_ALT_C_OPTS="--preview ' tree -C {} | head -200'"

# Plugin fzf-marks
# See: run_once_zsh_setup.sh
[[ -d ${QDOTS_ZSH_CACHE_PLUGS_DIR}/fzf-marks ]] && source ${QDOTS_ZSH_CACHE_PLUGS_DIR}/fzf-marks/fzf-marks.plugin.zsh

# Plugin zsh-abbrev-alias
# See: run_once_zsh_setup.sh
[[ -d ${QDOTS_ZSH_CACHE_PLUGS_DIR}/zsh-abbrev-alias ]] && source ${QDOTS_ZSH_CACHE_PLUGS_DIR}/zsh-abbrev-alias/abbrev-alias.plugin.zsh

# Source aliases
[ -f "$QDOTS_CONF_DIR/aliases" ] && source "$QDOTS_CONF_DIR/aliases"
